---
title: "PSY6422 Data Management and Visualisation"
date: "2023-04-26"
output: html_document
---

# Data Origins and Project Summary
#### There is no DOI for this avaliable. The data for this project was downloaded from the [GridWatch](https://gridwatch.templar.co.uk/download.php) website. *access date* The data I used is provided in my github repository. The data downloadable from GridWatch is scraped from the Exelon [BMreports](https://www.bmreports.com/bmrs/?q=help/about-us) website every 5 minutes. * where do they get it from????* There are many datasets availiable to download including grid frequency and total output from different energy sources such as coal, hydro and biomass. The data is availiable from 2011 until now. For the purposes of my project I chose to download demand data from the full time range, which when I downloaded it was ...2011 until ... 2023. The dataset has....points. 

#### The aim for my project is to visualise if/ how energy demand was affected by Covid-19. The rationale for this is that during Covid different events happened which could effect energy demand. Including national lockdowns and working from home. My hypothesis is that when the lockdowns and working from home were introduced, energy OR ELECTRICITY demand would have decreased given many businesses had to close. Visualising the data with a graph should be very effective for this question as significant dips or peaks in demand will be clear and it is a large dataset with blah million data points. 

#### Code book is for units etc- try and link it here as in more information about the units can be found in code book here

*Plotly for rollover*

*more information about the website in general and the dataset*
*tools project options, renv* *renvlock is where it is* *see markscheme*

##### *More info about the bit i chose to download and why 

#### I organised my project following a similar structure to ...link and created different scripts, everything runs on the main script. This is to prepare for scalability and for easier debugging- more details can be found in notes folder. The headings below are from seperate scripts. 

## Utilities 

```{r}

#' Function to convert date to date format
#' 
#' @param value: date to be converted 
#' @param previous_format: format of date to be converted 
#' @param new_format: format of date to be converted to
#' @return: formatted date 
#' @export
#' 
#' @examples:
#' convert_date("2021-04-23 00:00:00", previous_format="%Y-%m-%d %H:%M:%S", new_format= "%Y-%m-%d")
convert_date = function(value,
                        previous_format = "%Y-%m-%d %H:%M:%S",
                        new_format = "%Y-%m-%d %H:%M:%S") {
  # Convert date to POSIXct
  timestamp = strptime(value, format = previous_format)
  
  # Format date 
  new_value = as.POSIXct(format(timestamp, format = new_format))
  
  # Return formatted date
  return(new_value)
}
```

## Configuration 

```{r}
##################################
# Load libraries
##################################
library(here)
library(tidyverse)
library(ggplot2)
library(scales)

##################################
# Set file directories
##################################
raw_dir = here("raw/")
figs_dir = here("figs/")
processed_dir = here("processed/")

##################################
# Set file paths 
##################################
raw_data_path = paste0(raw_dir, "gridwatch.csv")
processed_data_path = paste0(processed_dir, "gridwatch_processed.csv")

processed_pd_path = paste0(processed_dir, "pd_processed.csv")

processed_year_path = paste0(processed_dir, "year_processed.csv")


```



